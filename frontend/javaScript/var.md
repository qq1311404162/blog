## JS 引擎工作原理
JS 引擎在进入一段可执行的代码时，引擎会创建一个**全局对象**，然后会构建一个**执行栈**。之后会自动创建一个全局执行上下文，遇到函数执行时，会创建并进入函数执行上下文。

每创建一个执行上下文时，JS 引擎会将其放入执行栈(先入后出)的顶部，每当函数执行完毕，JS 引擎会将其执行上下文从执行栈中弹出。

JS 引擎待执行上下文入栈后，便开始执行其内部的代码

##### 创建执行上下文
js 引擎创建执行上下文有三个过程
* 作用域链
* 变量对象
* this 绑定

##### 作用域链
<!-- 用于标识符解析，当执行环境被创建时，作用域链就初始化为当前运行函数的scope所包含的对象 -->
JS 引擎查找变量时，会根据作用域链一层层查找变量是否存在。
###### 词法作用域
又叫静态作用域，即作用域在定义的时候就决定，与调用地点无关。JS 采用的就是词法作用域
```
var value = 1;
function foo() {
    console.log(value);
}
function bar() {
    var value = 2;
    foo();
}
bar(); // 输出 1
```
###### 函数创建
函数有个内部属性 [[scope]]，当函数创建时，会将**当前执行上下文的活动对象**保存到这个属性中
###### 函数激活
即创建函数上下文时，初始化作用域链，将[[scope]]属性的值放入作用域链中

##### 变量对象
变量对象是当前执行上下文相关的数据作用域，存储了该上下文中定义的变量和函数声明

当变量对象创建完毕后，会被推入作用域链的顶端

在定义函数时，会将当前活动对象的值指向函数的[[scope]]属性

###### 全局变量对象
当 JS 引擎创建一个全局执行上下文时，会自动创建一个全局变量对象，并将其指向全局对象。该变量对象中不仅包含了全局对象的原有属性，还包含了定义在全局执行上下文中的变量和函数

###### 函数变量对象
函数执行上下文的变量对象，除了该上下文中定义的变量和函数外，还包括了函数的形参，arguments 对象

##### this 绑定
将 this 绑定到变量对象上？？？




#####  代码执行
js 引擎顺序执行代码，根据代码修改变量对象的值。当遇到执行函数时，创建新的函数执行上下文
